<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Candles of your life</title>
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <!-- header -->
    <header>
      <div class="container">
        <div class="header_cont">
          <img class="logo" src="./img/Logo.svg" alt="Logo" />
          <nav class="nav_items">
            <a href="#product_cards" class="nav_item">Obchod</a>
            <a href="./about.html" class="nav_item">O nas</a>
            <a href="./blog.html" class="nav_item">Blog</a>
            <a href="./contact.html" class="nav_item">Kontakty</a>
          </nav>
          <a href="#" class="header_cart"
            >Košik<img class="cart_img" src="./img/cart.svg" alt="cart"
          /></a>
        </div>
      </div>
    </header>
    <div class="line"></div>
    <main>
      <!-- slider gallery -->
      <div class="container slider_container">
        <div id="slider">
          <img class="slide" src="./img/slider_img/1.jpeg" alt="Slide 1" />
          <img class="slide" src="./img/slider_img/2.jpeg" alt="Slide 2" />
          <img class="slide" src="./img/slider_img/3.jpeg" alt="Slide 3" />
        </div>
        <div class="slider_head">
          <h1 class="slider_titile">
            Candles <br />
            of your life
          </h1>
          <div class="line"></div>
          <p class="slider_text">
            Rádi bychom Vás přivítali v našem internetovém obchůdku se sojovými
            svíčkami. Proč jsem začala se svíčkami? Miluji vytváření nových věcí
            a hlavně vůni provoněného domova. Všechny svíčky jsou vyráběny s
            citem pro detail a láskou. Svíčky jsou vyráběny ze sojového vosku,
            který je ekologický a neznečišťuje životní prostředí, narozdíl od
            parafínu. Přírodní vosky mají další výhody, hoří déle a mají vyšší
            molekulovou hustotu, uchovávají lépe vůně a jsou tudíž
            intenzivnější.
          </p>
        </div>
      </div>
      <div class="line"></div>
      <!-- shop -->
      <div class="container">
        <div id="product_cards" class="shop_conteiner product-cards-container">
          <script>
            async function loadProductCards() {
              try {
                // Получаем список продуктов с сервера
                const response = await fetch(
                  "http://localhost:3000/api/products"
                );
                const products = await response.json();

                const productCardsContainer =
                  document.getElementById("product_cards");
                productCardsContainer.innerHTML = ""; // Очищаем контейнер перед добавлением карточек

                products.forEach((product) => {
                  // Создаем карточку продукта
                  const card = document.createElement("div");
                  card.className = "card";

                  // Вставляем изображение продукта или заглушку
                  const imageSrc = product.image
                    ? `http://localhost:3000/${product.image}`
                    : "./img/slider_img/1.jpeg";
                  const image = `<img src="${imageSrc}" alt="${product.name}" class="card_img" />`;

                  // Условие для отображения объема (если он указан)
                  const volume = product.volume
                    ? `<div class="sklad">Objem: ${product.volume} ml</div>`
                    : "";

                  // Добавляем остальные данные продукта в карточку
                  card.innerHTML = `
          ${image}
          <div class="card_content">
            <div class="card_top">
              <h3 class="card_title">${product.name}</h3>
              <div class="card_line"></div>
              <p class="card_text">${product.description}</p>
            </div>
            <div class="card_bottom">
              ${volume}
              <div class="sklad">Na sklade: ${product.stock} ks</div>
              <div class="card_footer">
                <span class="price">${product.price} Kč</span>
                <img class="card_cart" src="./img/cart.svg" alt="cart" />
              </div>
            </div>
          </div>
        `;

                  // Добавляем карточку в контейнер
                  productCardsContainer.appendChild(card);
                });
              } catch (error) {
                console.error("Ошибка при загрузке продуктов:", error);
              }
            }

            // Загружаем карточки при загрузке страницы
            document.addEventListener("DOMContentLoaded", loadProductCards);
          </script>
        </div>
      </div>
    </main>
    <footer>
      <div class="line"></div>
      <div class="container">
        <p class="footer_text">website by @mr.spacks 2024</p>
      </div>
    </footer>
    <script src="./index.js"></script>
  </body>
</html>
